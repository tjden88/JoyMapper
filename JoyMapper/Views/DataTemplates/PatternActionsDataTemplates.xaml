<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:joyActions="clr-namespace:JoyMapper.ViewModels.JoyActions"
                    xmlns:controls="clr-namespace:WPR.Controls;assembly=WPR"
                    xmlns:patternActions="clr-namespace:JoyMapper.Models.PatternActions"
                    xmlns:viewModels="clr-namespace:JoyMapper.ViewModels"
                    xmlns:models="clr-namespace:JoyMapper.Models"
                    xmlns:base="clr-namespace:JoyMapper.Models.PatternActions.Base">

    <DataTemplate DataType="{x:Type base:KeyboardKeyBindingGroup}">
        <DockPanel>
            <ToolBar DockPanel.Dock="Top" Margin="0,5">
                <Button DockPanel.Dock="Top"
                            ToolTip="{Binding StartStopRecordCommand}"
                            Command="{Binding StartStopRecordCommand}">
                    <Button.Content>
                        <controls:WPRIconText Text="{Binding RecordButtonText}" IconSource="Keyboard"/>
                    </Button.Content>
                </Button>
                <Button DockPanel.Dock="Top"
                            Command="{Binding ClearBindingsCommand}" 
                            ToolTip="{Binding ClearBindingsCommand}">
                    <Button.Content>
                        <controls:WPRIcon Source="Clear" Foreground="{DynamicResource AttentionColorBrush}"></controls:WPRIcon>
                    </Button.Content>
                </Button>
            </ToolBar>
            <Grid>
                <ListBox ItemsSource="{Binding KeyBindings}" HorizontalContentAlignment="Stretch">
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type models:KeyboardKeyBinding}">
                            <Grid Background="{StaticResource TransparentBrush}" Name="Grid">

                                <TextBlock Text="{Binding}" VerticalAlignment="Center" Margin="5"/>
                                <Button HorizontalAlignment="Right" VerticalAlignment="Center"
                                        Style="{StaticResource WPRToolButton}" Margin="0,0,5,0"
                                        Visibility="{Binding ElementName=Grid, Path=IsMouseOver, Converter={StaticResource Bool2VisibilityConverter}}"
                                        Foreground="Red"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=ListBox}, Path=DataContext.RemoveKeyBindingCommand}"
                                        ToolTip="{Binding RelativeSource={RelativeSource AncestorType=ListBox}, Path=DataContext.RemoveKeyBindingCommand}"
                                        CommandParameter="{Binding}"
                                        Background="Transparent" BorderThickness="0">
                                    <Button.Content>
                                        <controls:WPRIcon Source="TrashOutline"/>
                                    </Button.Content>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Border CornerRadius="5" Focusable="True" Opacity="0.4" Background="{DynamicResource AccentColorBrush}">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Setters>
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </Style.Setters>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsRecorded}" Value="True">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Foreground="{DynamicResource TextColorBrush}" TextAlignment="Center" FontSize="28" Margin="5" TextWrapping="Wrap" Text="Запись..."/>
                        <TextBlock Foreground="{DynamicResource TextColorBrush}" TextAlignment="Center" FontSize="20" TextWrapping="Wrap" Text="Нажмите комбинацию клавиш на клавиатуре"/>
                    </StackPanel>
                </Border>
            </Grid>
        </DockPanel>

    </DataTemplate>


    <DataTemplate DataType="{x:Type patternActions:SimpleKeySenderPatternAction}">
        <Grid>

            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <DockPanel>
                <TextBlock Text="Команды при активации" DockPanel.Dock="Top" FontSize="16" Foreground="{DynamicResource SecondaryTextColorBrush}"/>
                <ContentControl Content="{Binding PressKeyBindings}" Margin="5"/>
            </DockPanel>

            <Rectangle Grid.Column="1" Width="1" Fill="{DynamicResource DividerColorBrush}"/>
            <GridSplitter Grid.Column="1" HorizontalAlignment="Center"/>

            <DockPanel Grid.Column="2">
                <TextBlock Text="Команды при деактивации" DockPanel.Dock="Top" FontSize="16" Foreground="{DynamicResource SecondaryTextColorBrush}"/>
                <ContentControl Content="{Binding ReleaseKeyBindings}" Margin="5"/>
            </DockPanel>

        </Grid>

    </DataTemplate>


    <DataTemplate DataType="{x:Type joyActions:ExtendedButtonJoyActionViewModel}">
        <Grid>

            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <ContentControl Content="{Binding SinglePressKeys}" Margin="5"/>

            <Rectangle Grid.Column="1" Width="1" Fill="{DynamicResource DividerColorBrush}"/>

            <GridSplitter Grid.Column="1" HorizontalAlignment="Center"/>

            <ContentControl Grid.Column="2" Content="{Binding DoublePressKeys}" Margin="5"/>

            <Rectangle Grid.Column="3" Width="1" Fill="{DynamicResource DividerColorBrush}"/>

            <GridSplitter Grid.Column="3" HorizontalAlignment="Center"/>

            <ContentControl Grid.Column="4" Content="{Binding LongPressKeys}" Margin="5"/>

        </Grid>

    </DataTemplate>

    <DataTemplate DataType="{x:Type joyActions:AxisJoyActionViewModel}">
        <!--Настройки оси-->
       <DockPanel>
            <DockPanel DockPanel.Dock="Top"  Margin="5">

                <Separator Background="{DynamicResource DividerColorBrush}" DockPanel.Dock="Bottom" Margin="5"/>

                <TextBlock Text="{Binding CurrentAxisValue, StringFormat='Текущее значение: {0}'}" DockPanel.Dock="Bottom" Margin="0,5,5,5"/>

                    <Grid DockPanel.Dock="Top">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Начало активной зоны оси:" VerticalAlignment="Center" />
                        <Slider VerticalAlignment="Center" Grid.Column="1" Margin="5" Maximum="65535" IsSelectionRangeEnabled="True"
                                SelectionStart="{Binding StartValue}" 
                                SelectionEnd="{Binding EndValue}" 
                                Value="{Binding StartValue}" />
                        <TextBlock Grid.Column="2" VerticalAlignment="Center" Text="{Binding StartValue}"/>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Конец активной зоны оси:"  VerticalAlignment="Center"/>
                        <Slider VerticalAlignment="Center" Grid.Column="1" Margin="5" Maximum="65535" IsSelectionRangeEnabled="True" 
                                SelectionStart="{Binding StartValue}" 
                                SelectionEnd="{Binding EndValue}" 
                                Value="{Binding EndValue}" />
                    <TextBlock Grid.Column="2" VerticalAlignment="Center" Text="{Binding EndValue}"/>
                    </Grid>
                </DockPanel>
            <Grid>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <ContentControl Content="{Binding OnRangeKeys}" Margin="5"/>

                <Rectangle Grid.Column="1" Width="1" Fill="{DynamicResource DividerColorBrush}"/>
                <GridSplitter Grid.Column="1" HorizontalAlignment="Center"/>

                <ContentControl Grid.Column="2" Content="{Binding OutOfRangeKeys}" Margin="5"/>

            </Grid>
        </DockPanel>

    </DataTemplate>

</ResourceDictionary>